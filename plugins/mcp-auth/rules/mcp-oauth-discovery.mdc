---
description:
globs: **/server.ts, **/server.js, **/main.py, **/app.py, **/app.ts, **/index.ts, **/index.js
alwaysApply: false
---

# MCP OAuth Protected Resource Endpoint

The `.well-known/oauth-protected-resource` endpoint MUST be publicly accessible (no auth required). This is how MCP clients like Claude Desktop, Cursor, and VS Code discover your OAuth authorization server.

## Required response shape

```json
{
  "authorization_servers": ["https://<SCALEKIT_ENVIRONMENT_URL>/resources/<YOUR_RESOURCE_ID>"],
  "bearer_methods_supported": ["header"],
  "resource": "https://mcp.yourapp.com",
  "resource_documentation": "https://mcp.yourapp.com/docs",
  "scopes_supported": ["scope:read", "scope:write"]
}
```

## Rules

- Copy the exact `authorization_servers` URL from Scalekit dashboard → MCP Servers → Your server → Metadata JSON
- NEVER require authentication on this endpoint
- ALWAYS skip auth middleware for any path containing `.well-known`
- List ALL scopes configured in the Scalekit dashboard under `scopes_supported`
- `resource` must match the Server URL registered in Scalekit (or use autogenerated `res_123456789` ID if no URL was set)
